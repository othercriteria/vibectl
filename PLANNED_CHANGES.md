# Planned Changes\n\n- Define JSON schema for command-generation LLM output (commands, explanation, error, action_type, wait_duration).\n- Update LLM prompts in `prompt.py` to request JSON output conforming to the schema.\n- Integrate schema usage with `llm` calls in `model_adapter.py` or `command_handler.py` using `--schema`.\n- Implement JSON response parsing and handling logic based on `action_type`.\n- Add schema validation for received JSON.\n- Implement fallback mechanism (request JSON in prompt, validate after) for models without native schema support.\n- Add tests for schema definition, prompt generation, response handling, and fallback mechanism.
